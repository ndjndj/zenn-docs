---
title: "DynamoDB ã®ãƒ­ãƒ¼ã‚«ãƒ«ç’°å¢ƒã‚’ Docker ã§æ§‹ç¯‰ã—ã¦ã¿ã‚‹"
emoji: "ğŸï¸"
type: "tech"
topics:
  - "aws"
  - "docker"
  - "dynamodb"
published: true
published_at: "2023-12-26 12:27"
---

`Amazon DynamoDB` ã‚’åˆ©ç”¨ã—ãŸ `API` ã‚’é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚
`AWS` ä¸Šã«ãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ã‚’å…¥ã‚ŒãŸ dev table ã‚’ä½œæˆã—ã¦ãã®ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’å‘¼ã³å‡ºã™ã‚ˆã†ã«ã—ã¦ã„ã¾ã—ãŸã€‚
ç„¡æ–™æ ã«åã¾ã£ã¦ã„ã‚‹ã¨ã¯ã„ãˆã‚­ãƒ£ãƒ‘ã‚·ãƒ†ã‚£ã‚’æ¶ˆè²»ã—ã¦ã—ã¾ã£ã¦ã„ã‚‹ã“ã¨ã‹ã‚‰ã‚‚ã†å°‘ã—éŠã³ã®ã‚ã‚‹ã‚µãƒ³ãƒ‰ãƒœãƒƒã‚¯ã‚¹çš„ãªç’°å¢ƒãŒæ¬²ã—ããªã£ãŸã®ã§ `Docker` ã§ã®æ§‹ç¯‰ã‚’è©¦ã¿ã¾ã—ãŸã€‚

# DynamoDB local ã¨ã¯
ãã®ã¾ã¾ãƒ­ãƒ¼ã‚«ãƒ«ã§åˆ©ç”¨ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ `DynamoDB` ã§ã™ã€‚
ãŸã ã¾ã‚‹ã£ãã‚Š Web ã‚µãƒ¼ãƒ“ã‚¹ã® `DynamoDB` ã¨åŒã˜ã¨ã„ã†ã‚ã‘ã§ã¯ãªãã€ãƒ†ãƒ¼ãƒ–ãƒ«åã®å¤§æ–‡å­—å°æ–‡å­—ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã§ã¯åŒºåˆ¥ã—ãªã‹ã£ãŸã‚Šã€ã‚‚ã‚ã‚‚ã‚ã®é€Ÿåº¦ã®éƒ¨åˆ†ã‚„åˆ¶é™ãªã©ã®éƒ¨åˆ†ã§è‹¥å¹²ç•°ãªã‚‹éƒ¨åˆ†ã‚‚ã‚ã‚‹ã‚ˆã†ã§ã™ã€‚

https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/DynamoDBLocal.UsageNotes.html

# docker-compose.yml ã®æ§‹æˆ
ä»Šå›ã¯ `DynamoDB Local` ã¨ç®¡ç†ç”»é¢ã§ã‚ã‚‹ `dynamodb-admin` ã‚’æ§‹ç¯‰ã—ã¾ã™ã€‚

```bash
version: '3'
services: 
  dynamodb: 
    image: amazon/dynamodb-local 
    container_name: dynamodb-local-example
    command: -jar DynamoDBLocal.jar -sharedDb -dbPath . -optimizeDbBeforeStartup
    volumes: 
      - dynamodb:/var/lib/dynamodblocal 
    ports: 
      - 8000:8000
  dynamodb-admin: 
    image: aaronshaf/dynamodb-admin 
    tty: true 
    ports: 
      - "8001:8001"
    depends_on:
      - dynamodb 
    environment: 
      DYNAMO_ENDPOINT: http://dynamodb-local-example:8000
volumes: 
  dynamodb: 
    driver: local 
  bin: 
    driver: local
```

# å°å…¥

## æ§‹ç¯‰

```bash
docker compose build --no-cache
docker compose up -d
```

## ç¢ºèª

`dynamodb-admin` ã®ç®¡ç†ç”»é¢ã«ã¨ã‚“ã§ã¿ã¾ã™ã€‚

```bash
http://localhost:8001
```

![](https://storage.googleapis.com/zenn-user-upload/3ca22fdb6ff6-20231226.png)

### è©¦ã—ã«ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆã—ã¦ã¿ã‚‹

![](https://storage.googleapis.com/zenn-user-upload/f0767cd90cfc-20231226.png)

![](https://storage.googleapis.com/zenn-user-upload/690b31ce06c7-20231226.png)


# container_name ã¨ DYNAMODB_ENDPOINT ã‚’ãã¡ã‚“ã¨æŒ‡å®šã™ã‚‹
å€‹äººçš„ã«ã¯ã¾ã£ãŸå€‹æ‰€ã§ã™ã€‚

`depends_on` ã ã‘ã®æŒ‡å®šã§ã„ã„ã¨æ€ã„ãã‚„ `DYNAMODB_ENDPOINT` ã®è¨­å®šã‚‚å¿…è¦ãªã‚ˆã†ã§ã™ã€‚è¨­å®šã—ãªã„ã¨ `dynamodb-admin` ã‹ã‚‰æ¥ç¶šã§ããªã„ã§ã™ã€‚

# ä»Šå¾Œ
`dynamodb-admin` ã¯ã€ãƒ‡ãƒ¼ã‚¿ã‚„ã€ãƒ†ãƒ¼ãƒ–ãƒ«ã®ãƒ¡ã‚¿æƒ…å ±ã‚’ç”Ÿãƒ‡ãƒ¼ã‚¿å½¢å¼ã§ã¿ã‚‰ã‚Œã‚‹ã®ã§ä¾¿åˆ©ã§ã™ãŒã€CSV ã‚¤ãƒ³ãƒãƒ¼ãƒˆãªã©ã‚’ã—ãŸã„å ´åˆã¯ `NoSQL Workbench` ã‚’åˆ©ç”¨ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
ãã®ä»–ã€API ã‚µãƒ¼ãƒãƒ¼ã‚„ `awscli` ã¨ã®é€£æºã€ã‚¹ã‚¯ãƒªãƒ—ãƒˆã«ã‚ˆã‚‹ãƒ†ãƒ¼ãƒ–ãƒ«ç”Ÿæˆãªã©ã‚‚ã‚„ã‚ŠãŸã„ã¨æ€ã„ã¾ã™ã€‚

# å‚è€ƒ
https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/DynamoDBLocal.DownloadingAndRunning.html

https://www.takayasugiyama.com/entry/2021/10/17/064018
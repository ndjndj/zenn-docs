---
title: "Rails ã§é…åˆ—ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹ã«ã¯ã€æ¸¡ã™éš›ã®ã‚­ãƒ¼ã«[]ã‚’è¿½è¨˜ã™ã‚‹"
emoji: "ğŸ°"
type: "tech"
topics:
  - "rails"
  - "ruby"
published: true
published_at: "2024-01-09 15:46"
---

`Ruby on Rails` ã§ REST API ã‚’é–‹ç™ºã—ã¦ã„ã¾ã™ã€‚
é…åˆ—ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™å ´åˆã«ã¤ã„ã¦èª¿ã¹ãŸã®ã§å‚™å¿˜éŒ²ã‚’æ®‹ã—ã¾ã™ã€‚

# è¦ç´„
- ãã‚‚ãã‚‚é…åˆ—ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™å ´åˆã®ãƒ«ãƒ¼ãƒ«ãŒæ˜ç¢ºã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã¯ãªãã€è¨€èªã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å´ã§åˆ¶å¾¡ã•ã‚Œã¦ã„ã‚‹
- é…åˆ—ã«ã—ãŸã„ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã« `[]` ã‚’è¿½è¨˜ã™ã‚‹

# ãã‚‚ãã‚‚ã®å®šç¾©ã«ã¤ã„ã¦
`URI(URL)` ã«é–¢ã™ã‚‹æ¨™æº–ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚ã‚‹ã€[RFC 3986](https://datatracker.ietf.org/doc/html/rfc3986) ã«ã¯é…åˆ—ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™éš›ã®ä½œæ³•ã«ã¤ã„ã¦æ˜ç¢ºã«å®šç¾©ã•ã‚Œã¦ã„ã‚‹ã‚ã‘ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

é…åˆ—ã®ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¸¡ã™éš›ã®ä½œæ³•ã«ã¤ã„ã¦ã¯ã€è¨€èªã‚„ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã«ã‚ˆã£ã¦ç•°ãªã‚‹åˆ¶å¾¡ãŒã•ã‚Œã¦ã„ã‚‹ã¨ã®ã“ã¨ã§ã™ã€‚

## å‚è€ƒ

https://zenn.dev/saka2jp/articles/1afb235f2db217
https://stackoverflow.com/questions/6243051/how-to-pass-an-array-within-a-query-string

# Rails ã§ã¯ã€ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã« [] ã‚’è¿½è¨˜ã™ã‚‹
ã‚¿ã‚¤ãƒˆãƒ«ã®ã¨ãŠã‚Šã§ã™ã€‚

ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã®æ–‡å­—åˆ—ã‚’ `Rails API` ã«æ¸¡ã—ã¦ `Rails` å´ã§ Split ã—ãŸã‚Šã™ã‚‹æ–¹æ³•ã¯è€ƒãˆä»˜ãã¾ã—ãŸãŒãªã‚“ã¨ãªãã‚¹ãƒãƒ¼ãƒˆã˜ã‚ƒãªã„æ°—ãŒã—ãŸã®ã§èª¿ã¹ãŸã¨ã“ã‚ `Rails` ã§ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«åˆ¶å¾¡ã‚’è¡Œã£ã¦ã„ã‚‹ã“ã¨ãŒã‚ã‹ã‚Šã¾ã—ãŸã€‚

```bash
# client
https://example.com/api/animals?names[]=cat&names[]=dog&names[]=sheep
```

ä¸Šè¨˜ã®ã‚ˆã†ã«ã€ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã« `[]`(è§’ã‹ã£ã“)ã‚’ä»˜åŠ ã—ã¦ `Rails` å´ã«æ¸¡ã›ã°ã€é…åˆ—ã¨ã—ã¦è§£é‡ˆã—ã¦ãã‚Œã¾ã™ã€‚

```ruby
# ruby
def index
  names = params[:names]
  # names -> ["cat", "dog", "sheep"]
end
```

ã¾ãŸã€ã“ã®æ–¹æ³•ã§ã‚¯ã‚¨ãƒªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’å—ã‘å–ã‚‹å ´åˆã€å‹æ¨è«–ã‚„å¤‰æ›ã¯è¡Œã‚ã‚Œãšå¸¸ã«æ–‡å­—åˆ—ã¨ãªã‚‹ãŸã‚ã€æ³¨æ„ãŒå¿…è¦ã§ã™ã€‚

https://railsguides.jp/action_controller_overview.html#%E3%83%8F%E3%83%83%E3%82%B7%E3%83%A5%E3%81%A8%E9%85%8D%E5%88%97%E3%81%AE%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF

# ã•ã„ã”ã«
`[]` ã§é…åˆ—åŒ–ã™ã‚‹æ–¹æ³•ã¯ `PHP` ã‚„ `express(node.js)` ã§ã‚‚æ¡ç”¨ã•ã‚Œã¦ã„ã‚‹æ–¹æ³•ã ãã†ã§ã™ã€‚
`id=1&id=2&id=3` ã¿ãŸã„ã«æ¸¡ã™æ–¹æ³•ã—ã‹ä½¿ã£ãŸã“ã¨ãŒãªã‹ã£ãŸã®ã§å‹‰å¼·ã«ãªã‚Šã¾ã—ãŸã€‚

# å‚è€ƒ
https://datatracker.ietf.org/doc/html/rfc3986
https://zenn.dev/saka2jp/articles/1afb235f2db217
https://stackoverflow.com/questions/6243051/how-to-pass-an-array-within-a-query-string
https://railsguides.jp/action_controller_overview.html#%E3%83%8F%E3%83%83%E3%82%B7%E3%83%A5%E3%81%A8%E9%85%8D%E5%88%97%E3%81%AE%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF